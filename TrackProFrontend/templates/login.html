<!DOCTYPE html>
<html lang="en">

<head>
  {%load static %}
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login Form</title>
  <script src="{% static 'js/jquerry/jquery.js'%}"></script>
  <script src="{% static 'js/jquerry/jquery.min.js'%}"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="static/assets/css/login.css" />

  <link rel="stylesheet" type="text/css"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" />
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-messaging.js"></script>
  <script>
    var firebaseConfig = {
      apiKey: 'AIzaSyALcJid507IJ6uVSCZBthQMi5GSNyMgL2g',
      authDomain: 'hrms-518c4.firebaseapp.com',
      projectId: 'hrms-518c4',
      storageBucket: 'hrms-518c4.appspot.com',
      messagingSenderId: '131244622426',
      appId: '1:131244622426:web:c2b4419b52ee473c524e63'
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    // Get Firebase Messaging object
    const messaging = firebase.messaging();
    messaging.requestPermission()
      .then(() => {
        console.log('Notification permission granted');
        return messaging.getToken();

      })
      .then((token) => {
        console.log('FCM Token:', token);
        $('#desktopToken').val(token);
      })
      .catch((error) => {
        console.log("error", error)
        if (error.code === 'messaging/permission-blocked') {
          console.warn('Notification permission blocked by user');
        } else {
          console.error('Error getting permission or token:', error);
        }
      });

    // Rest of your code
  </script>
</head>

<style>
.djangoerrormsg {
    font-size: 20px;
    position: absolute;
    top: 10%;
    left: 40%;
}

  .alert-error {
    background-color: #ffdede !important;
    color: #ff0000 !important;
  }
</style>

<body>

  <div class="container">


            <div class="djangoerrormsg">
              {% if messages %}
              <div class="row" style="justify-content: center;">
                <div class="col-sm-12">
                  {% for message in messages %}
                  <div style="margin:15px 0px" class="alert alert-{{ message.tags }} alert-dismissible text-center"
                    role="alert">
                    <button type="button" class="close ms-3 btn-close" data-bs-dismiss="alert" aria-label="Close">
                    </button>
                    <p style="margin-bottom: 0px; font-size:16px;">{{ message }}</p>

                  </div>
                  {% endfor %}
                </div>
              </div>
              {% endif %}
            </div>


    <div class="row align-items-center">
      <div class="col-lg-7">
        <div class="content">
          <img src="static/assets/images/2456062.jpg" alt="Pair programming" class="img-fluid w-75 mx-auto" />
        </div>
      </div>
      
      <div class="col-lg-5">

        <div class="form-div">

          <form method="post" class="row g-3">
            {%csrf_token%}
            <img src="static/assets/images/zentro_logo.jpeg" alt="zentro logo" class="img-fluid" />
            <!-- <h3>Track Pro</h3> -->



            <div class="col-md-12">
              <div class="form-floating mb-3">
                <input type="email" class="form-control" id="email" name="Username" placeholder="" />
                <span id="emailrequired" style="color:red;"></span>
                <label for="floatingInput">Email address</label>
                <span> <span class="see-password"><i class="fa fa-envelope"></i></span></span>
              </div>

            </div>
            <div class="col-md-12">
              <div class="form-floating">
                <input type="password" class="form-control" id="password" name="password" placeholder="" />
                <span id="passwordrequired" style="color:red;"></span>
                <label for="floatingPassword">Password</label>

                <i class="see-password toggle-password fa fa-eye-slash"></i>
              </div>

              <input type="text" class="form-control" id="desktopToken" name="desktopToken" placeholder="" hidden />


            </div>

            <div class="col-lg-12 text-end mt-2">
              <a href="/forget-password">Forgot Password?</a>
            </div>
            <div class="col-12">
              <button onclick="return validation();" type="submit" class="btn btn-primary login-btn">
                Login
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <script src="{% static 'js/jquerry/jquery.js'%}"></script>
  <script src="{% static 'js/jquerry/jquery.min.js'%}"></script>
  <script type="text/javascript" src="{% static 'assets/scripts/main.d810cf0ae7f39f28f336.js'%}"></script>
  <script>
    $(".alert").slideDown("slow").delay(3000).slideUp();

    $(".toggle-password").click(function () {
      $(this).toggleClass("fa-eye fa-eye-slash");
      input = $(this).parent().find("input");
      if (input.attr("type") == "password") {
        input.attr("type", "text");
      } else {
        input.attr("type", "password");
      }
    })

    function IsValid(value) {
      if (value == "" || value == null || value == undefined) {
        return true;
      } else {
        return false;
      }
    }


    function validation() {
      // var companycode = $("#companycode").val().trim();
      var email = $("#email").val().trim();
      var password = $("#password").val().trim();


      if (IsValid(email)) {
        $("#email").html();
        $("#emailrequired").show().delay(3000).slideUp();
        $("#emailrequired").html("Email is required");
        $("#email").focus();
        return false;
      }
      if (IsValid(password)) {
        $("#password").html();
        $("#passwordrequired").show().delay(3000).slideUp();
        $("#passwordrequired").html("Password is required");
        $("#password").focus();
        return false;
      }
    }
  </script>
</body>

</html>