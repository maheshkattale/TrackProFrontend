{% extends "index.html" %}
{% load static %} 
{% block headercontent %}
<div class="nav-item newheading">
Update Employee</div>

{% endblock %}
{% block content %}
<link rel="stylesheet" href="{% static 'assets/css/companylist.css' %}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css">


<style>
  .form-control:disabled, .form-control:read-only {
    background-color: #ffffff;
    opacity: 1;
  }
  .circle{
    display: flex;
    justify-content: center;
    height: 110px;
    margin-top: -20px;
    position: relative;
  }
  .read-only-input{
    pointer-events:none;
  }
  .file-upload {
    display: none;
  }

  .upload-button{
    position: absolute;
  top: 80px;
  left: 54%;
  cursor: pointer;
  font-size: 25px;
  }

  .profile-pic{
    width: 120px !important;
    height: 120px !important;
    border: 2px solid #174fa3;
    border-radius: 50%;
  }
  .preview-img{
    width: 120px !important;
    height: 120px !important;
    border: 2px solid #174fa3;
    border-radius: 50%;
  }
  .imagepre{
    width:40%;
    cursor:pointer;
  
  }  
  .form-control read-only-input{
      background:#fff !important;
  }


  .form-content {

    display: block;

    font-size: 16px;

    font-weight: 500;

    color: #174fa3  !important;
    padding: 1rem 0 !important;
    opacity:1 !important;

  }
  .form-content {
    color: #174fa3 !important;
  }
  input,select,textarea {
    width: 100%;
    font-size: 16px;
    color: #5f5b5b;
    border: none;
    border-bottom: 1px solid rgb(214, 214, 214);
    background: transparent;
    height: 30px;
    transition: border 0.4s ease;
    box-shadow: none !important;
    border-radius: 0px !important;
  }


  .marksheetimage{
    width:100px;
  }

  .accordion-button:not(.collapsed) {
    color: #174fa3 !important;
    background-color: #ffffff !important;
    box-shadow: inset 0 -1px 0 rgba(0,0,0,.125);
  }
  .viewEmpDeetsBtn{
    cursor:pointer;
  }


  .card {
    border-radius: 6px;
    background: #FFF;
    box-shadow: 0px 4px 8px #00000029;
  }
  .card-header-name-txt {
  color: #403f3f;
  font-size: 18px;
  padding-bottom: 16px;
  }
  .card-header {
  padding: 0.5rem 1rem;
  margin-bottom: 0;
  background-color: white;
  border-bottom: none;
  color: #403f3f;
  }
  .card-body {
  padding-top: 0px;
  padding-bottom: 0px;
  }
  .card-header-txt {
  font-size: 12px;
  }
  .card-header-blue-txt {
  color: #00AEEF;
  font-size: 16px;
  font-weight: 500;
  }
  .cardfooter {
  background: white;
  border: none;
  }
  .view-image-txt{
  font-size: 12px;
  color: #174fa3;
  font-weight:500;
  cursor:pointer;
  }


  .empname-text{
    text-transform: capitalize;
    font-weight: 500;
    color:#174fa3;


  }
  .dropdown-toggle::after {
    display: none;

}
  .empname-heading{
    text-transform: capitalize;
    font-weight: 500;
    font-size:20px;
  }

</style>

   
   <main class="main-wrapper">
    <div class="title-div py-3">
      <span class="first-container">
        <div class="company-title pe-5 d-none">Employee Profile </div>
      </span>
    </div>

      <form method="post" enctype="multipart/form-data" class="">

        <!-- <div class="py-2">
          <span class="empname-heading" ><span>Employee Name</span> : <span class="empname-text"> {{users.data.Firstname}} {{users.data.Lastname}}</span></span>
        </div> -->


          <div class="accordion" id="accordionExample">

            <div class="accordion-item">
              <h2 class="accordion-header" id="headingOne">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                  Personal Information
                </button>
              </h2>
              <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                  
                  



                  <div class="row">
                    <h5 class="my-3">Personal Details</h5>
                    <div class="col-md-12 mb-5">
                      <div class="circle">
                        <div>
                          {% if users.data.Photo != None %}
                            <img id="idProofPreview" class="profile-pic" src="{{imageurl}}{{users.data.Photo}}">
                          {%else%}
                            <img id="idProofPreview" class="profile-pic" src="https://t3.ftcdn.net/jpg/03/46/83/96/360_F_346839683_6nAPzbhpSkIpb8pmAwufkC7c5eD7wYws.jpg" >
                          {% endif %}
                        </div>

                        <div class="p-image">
                        </div>

                      </div>

                      <p id="profileimage_err" class="error"></p>
                      
                    </div>
      
      
      
                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <input type="text" class="form-control read-only-input" id="personalfirstname"   value="{{users.data.Firstname|default_if_none:'NA'}}" oninput="this.value = this.value.replace(/[^a-zA-Z ]+/g,'').replace(/(\..*)\./g, '$1');">
                        <label for="personalfirstname"  class="form-content">First Name</label>
                        <span id="personalfirstname_err" class="error"></span>
                      </div>
                    </div>


                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <input type="text" class="form-control read-only-input" id="personallastname"  value="{{users.data.Lastname|default_if_none:'NA'}}"  oninput="this.value = this.value.replace(/[^a-zA-Z ]+/g,'').replace(/(\..*)\./g, '$1');">
                        <label for="personallastname"  class="form-content">Last Name</label>
                        <span id="personallastname_err" class="error"></span>
                      </div>
                    </div>


      
                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <input type="text" class="form-control read-only-input" id="personalmobno"  value="{{users.data.Phone|default_if_none:'NA'}}" maxlength="10" oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1');">
                        <label for="personalmobno"  class="form-content">Mobile No</label>
                        <span id="personalmobno_err" class="error"></span>
                      </div>
                    </div>


                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <input type="date" class="form-control read-only-input" id="personalbirthyear"  value="{{users.data.BirthDate|default_if_none:'NA'}}">
                        <label for="personalbirthyear"  class="form-content">Birth Date</label>
                        <span id="personalbirthyear_err" class="error"></span>
                      </div>
                    </div>



                    <div class="col-md-6">
                        
                      <div class="form-floating mb-3">
                        <input type="text" class="form-control read-only-input" id="residentialadd"   value="{{users.data.Address|default_if_none:'NA'}}">
                        <label for="residentialadd"  class="form-content">Residential Address</label>
                        <span id="residentialadd_err" class="error"></span>
                      </div>
                    </div>


                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <input type="text" class="form-control read-only-input" id="permanantadd" name="permanentaddress"  value="{{secondaryInfo.permanentaddress|default_if_none:'NA'}}">
                        <label for="permanantadd"  class="form-content">Permanant Address</label>
                        <span id="permanantadd_err" class="error"></span>
                      </div>
                    </div>
      
      
                    <div class="col-md-6">
                      <div class="form-floating mb-3">
      
                        <select class="form-control" id="residentialaddcountry" name="residentialadd">
                          <option selected>{{secondaryInfo.rcountryname}}</option>

                        </select>
                        <label for="residentialaddcountry"  class="form-content">Country</label>
                        <span id="residentialaddcountry_err" class="error"></span>
                      </div>
                    </div>


                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <select class="form-control" id="permanantaddcountry" name="permanantadd">
                          <option value="" selected>{{secondaryInfo.pcountryname}}</option>
                         
                        </select>
                        <label for="permanantaddcountry"  class="form-content">Country</label>
                        <span id="permanantaddcountry_err" class="error"></span>
                      </div>
                    </div>
      
      
      
      
                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <select class="form-control"  id="residentialaddstate" name="residentialadd">
                          <option value="" selecetd>{{secondaryInfo.rstatename}}</option>
                        </select>
                        <label for="residentialaddstate"  class="form-content">State</label>
                        <span id="residentialaddstate_err" class="error"></span>
                      </div>
      
                    </div>
      
                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <select class="form-control" id="permanantaddstate" name="permanantadd">
                          <option value="" selecetd>{{secondaryInfo.pstatename}}</option>
                        </select>
                        <label for="permanantaddstate"  class="form-content">State</label>
                        <span id="permanantaddstate_err" class="error"></span>
                      </div>
                    </div>
      
      
      
      
      
      
                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <select class="form-control"  id="residentialaddcity" name="residentialadd">
                          <option value="" selecetd>{{secondaryInfo.rcityname}}</option>
                        </select>
                        <label for="residentialaddcity"  class="form-content">City</label>
                        <span id="residentialaddcity_err" class="error"></span>
                      </div>
                    </div>

                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <select class="form-control"  id="permanantaddcity" name="permanantadd">
                          <option value="" selecetd>{{secondaryInfo.pcityname}}</option>
                        </select>
                        <label for="permanantaddcity"  class="form-content">City</label>
                        <span id="permanantaddcity_err" class="error"></span>
                      </div>
                    </div>
      
      
      
      
                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <input type="text" class="form-control read-only-input" id="residentialaddpincode"  value="{{secondaryInfo.residentialaddresspincode|default_if_none:'NA'}}" oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1');" maxlength="6">
                        <label for="residentialaddpincode"  class="form-content">Pincode</label>
                        <span id="residentialaddpincode_err" class="error"></span>
                      </div>
                    </div>


                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <input type="text" class="form-control read-only-input" id="permanantaddpincode"  value="{{secondaryInfo.permanantaddresspincode|default_if_none:'NA'}}" oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1');" maxlength="6">
                        <label for="permanantaddpincode"  class="form-content">Pincode</label>
                        <span id="permanantaddpincode_err" class="error"></span>
                      </div>
                    </div>

      
      
                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <select class="form-control"  id="bloodgroup" name="bloodgroup">
                            <option value="" selecetd>{{secondaryInfo.bloodgroup|default_if_none:'NA'}}</option>
                        </select>
                        <label for="bloodgroup"  class="form-content">Blood Group</label>
                        <span id="bloodgroup_err" class="error"></span>
                      </div>
                    </div>

                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <select class="form-control"  id="maritalstatus" name="maritalstatus">
                            <option value="" selecetd>{{secondaryInfo.maritalstatus|default_if_none:'NA'}}</option>
                        </select>
                        <label for="maritalstatus"  class="form-content">Marital Status</label>
                        <span id="maritalstatus_err" class="error"></span>
                      </div>
                    </div>
      
      
      
      
                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <input type="text" class="form-control read-only-input" id="adhaarcard" name="adhaarcard"  value="{{secondaryInfo.adhaarcard|default_if_none:'NA'}}"  oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1');">
                        <label for="adhaarcard"  class="form-content">Aadhaar Card</label>
                        <span id="adhaarcard_err" class="error"></span>
                      </div>
                    </div>
      
                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <input type="text"  value="{{secondaryInfo.pancard|default_if_none:'NA'}}" class="form-control read-only-input" id="pancard" name="pancard" >
                        <label for="pancard"  class="form-content">Pan Card</label>
                        <span id="pancard_err" class="error"></span>
                      </div>
                    </div>
      
      
      
      
                    <div class="col-md-6">
                      <label for="adhaarFile"  class="form-content cursor-pointer"> AadharCard Photo Copy   
                        </label>
                      <div class="pt-3">
                        <div class="image-preview d-flex justify-content-center"   id="imagePreview" >
                          {% if secondaryInfo.adhaarcardimage %}
                          <img id="adhaarFilepreview" class="imagepre"  data-bs-toggle="modal" data-bs-target="#adhaarcardimg" src="{{imageurl}}{{secondaryInfo.adhaarcardimage}}">
                          {%else%}
                          <img data-bs-toggle="modal" data-bs-target="#adhaarcardimg" src="https://t3.ftcdn.net/jpg/03/46/83/96/360_F_346839683_6nAPzbhpSkIpb8pmAwufkC7c5eD7wYws.jpg" id="adhaarFilepreview" alt="" class="imagepre"/>
                          {%endif%}
                          <canvas id="pdfViewer" class="pdfViewer" ></canvas>
                        </div>
                        <p id="adhaarcardimage_err" class="error ms-5"></p>
                      </div>



                      <div class="modal fade" id="adhaarcardimg"  aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-lg">
                          <form action="" class="formstyle">
                            <div class="modal-content">           
                              <div class="modal-header ps-4">
                                <h5 class="modal-title py-2" id="exampleModalLabel">Adhaar Card </h5>
                              </div>
                              <div class="modal-body">
                                

                                {% if secondaryInfo.adhaarcardimage %}
                                <img id="passportFilepreview" class="w-100" src="{{imageurl}}{{secondaryInfo.adhaarcardimage}}">
                                {%else%}
                                <img  src="https://t3.ftcdn.net/jpg/03/46/83/96/360_F_346839683_6nAPzbhpSkIpb8pmAwufkC7c5eD7wYws.jpg" id="passportFilepreview" alt="" class="w-100"/>
                                {%endif%}
                              </div>
                              <div class="modal-footer pe-5">
                                <div>
                                <button type="button" class="trackproBtn modalClose w-100 mx-4" data-bs-dismiss="modal">Close</button>
                                </div>
                              </div>
                            </div>
                          </form>
                        </div>
                      </div>


                    </div>
      
                    <div class="col-md-6">
                      <label for="panFile"  class="form-content cursor-pointer"> PanCard Photo Copy                    
                        </label>
      
                      <div class="pt-3">
                        <div class="image-preview1 d-flex justify-content-center" id="imagePreview1">
                          {% if secondaryInfo.pancardimage %}
                           <img id="panfilepreview" class="imagepre" data-bs-toggle="modal" data-bs-target="#pancardimg" src="{{imageurl}}{{secondaryInfo.pancardimage}}">
                          {%else%}
                            <img id="panfilepreview" data-bs-toggle="modal" data-bs-target="#pancardimg"  src="https://t3.ftcdn.net/jpg/03/46/83/96/360_F_346839683_6nAPzbhpSkIpb8pmAwufkC7c5eD7wYws.jpg" alt="" class="imagepre"/>
                          {%endif%}
                          <canvas id="pdfViewer1" class="pdfViewer1" ></canvas>
                        </div>
                        <p id="pancardimage_err" class="error ms-5"></p>
                      
                      </div>

                      <div class="modal fade" id="pancardimg"  aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-lg">
                          <form action="" class="formstyle">
                            <div class="modal-content">           
                              <div class="modal-header ps-4">
                                <h5 class="modal-title py-2" id="exampleModalLabel">Pancard </h5>
                              </div>
                              <div class="modal-body">
                                

                                {% if secondaryInfo.pancardimage %}
                                <img id="passportFilepreview" class="w-100" src="{{imageurl}}{{secondaryInfo.pancardimage}}">
                                {%else%}
                                <img  src="https://t3.ftcdn.net/jpg/03/46/83/96/360_F_346839683_6nAPzbhpSkIpb8pmAwufkC7c5eD7wYws.jpg" id="passportFilepreview" alt="" class="w-100"/>
                                {%endif%}
                              </div>
                              <div class="modal-footer pe-5">
                                <div>
                                <button type="button" class="trackproBtn modalClose w-100 mx-4" data-bs-dismiss="modal">Close</button>
                                </div>
                              </div>
                            </div>
                          </form>
                        </div>
                      </div>



                    </div>
                    <div class="col-md-6">
      
                          <label for="passportFile"  class="form-content cursor-pointer"> Passport Photo Copy
      
                          </label>
                          <div class="pt-3">
                            <div class="image-preview d-flex justify-content-center"   id="imagePreview" >
                              {% if secondaryInfo.passportimage %}
                                <img id="passportFilepreview" data-bs-toggle="modal" data-bs-target="#passportimg" class="imagepre" src="{{imageurl}}{{secondaryInfo.passportimage}}">
                              {%else%}
                                <img data-bs-toggle="modal" data-bs-target="passportimg" src="https://t3.ftcdn.net/jpg/03/46/83/96/360_F_346839683_6nAPzbhpSkIpb8pmAwufkC7c5eD7wYws.jpg" id="passportFilepreview" alt="" class="imagepre"/>
                              {%endif%}
                              <canvas id="pdfViewer" class="pdfViewer" ></canvas>
                            </div>
                            <p id="passportimage_err" class="error ms-5"></p>
                          </div>


                          <div class="modal fade" id="passportimg"  aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-lg">
                              <form action="" class="formstyle">
                                <div class="modal-content">           
                                  <div class="modal-header ps-4">
                                    <h5 class="modal-title py-2" id="exampleModalLabel">Passport </h5>
                                  </div>
                                  <div class="modal-body">
                                    
                                    {% if secondaryInfo.passportimage %}
                                    <img id="passportFilepreview" class="w-100" src="{{imageurl}}{{secondaryInfo.passportimage}}">
                                    {%else%}
                                    <img  src="https://t3.ftcdn.net/jpg/03/46/83/96/360_F_346839683_6nAPzbhpSkIpb8pmAwufkC7c5eD7wYws.jpg" id="passportFilepreview" alt="" class="w-100"/>
                                    {%endif%}
                                  </div>
                                  <div class="modal-footer pe-5">
                                    <div>
                                    <button type="button" class="trackproBtn modalClose w-100 mx-4" data-bs-dismiss="modal">Close</button>
                                    </div>
                                  </div>
                                </div>
                              </form>
                            </div>
                          </div>
      
                    </div>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
                    <h5 class="mt-2">Emergency Contact Details</h5>
                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                          <input type="text" class="form-control read-only-input" id="relation" name="relation1"  value="{{secondaryInfo.relation1|default_if_none:'NA'}}" oninput="this.value = this.value.replace(/[^a-zA-Z ]+/g,'').replace(/(\..*)\./g, '$1');">
                          <label for="relation"  class="form-content">Relation</label>
                          <span id="relation_err" class="error"></span>
                        </div>
                        
                        <div class="form-floating mb-3">
                          <input type="text" class="form-control read-only-input" id="relation2" name="relation2"  value="{{secondaryInfo.relation2|default_if_none:'NA'}}" oninput="this.value = this.value.replace(/[^a-zA-Z ]+/g,'').replace(/(\..*)\./g, '$1');">
                          <label for="relation2"  class="form-content">Relation</label>
                        </div>
                    
                    </div>
                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <input type="text" class="form-control read-only-input" id="relationmobno" name="relation1number"  value="{{secondaryInfo.relation1number|default_if_none:'NA'}}" maxlength="10" oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1');">
                        <label for="relationmobno"  class="form-content">Mobile No</label>
                        <span class="error" id="relationmobno_err"></span>
                      </div>
                      <div class="form-floating mb-3">
                        <input type="text" class="form-control read-only-input" id="relation2mobno" name="relation2number"  value="{{secondaryInfo.relation2number|default_if_none:'NA'}}" maxlength="10" oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1');">
                        <label for="relation2mobno"  class="form-content">Mobile No</label>
                        <span class="error" id="relation2mobno_err"></span>
      
                      </div>
                
                    </div>

                  </div>


                </div>
              </div>
            </div>
        
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingTwo">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                  Educational Qualifications
                </button>
              </h2>
              <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                  <div class="col-md-12 d-flex justify-content-between mt-2">
                    <h5 class="">Educational Qualifications</h5>
                    <div>
                    </div>
                  </div>


                  <div class="row" id="">
                    {%for i in qualifications%}
                      <div class="cardcolumn col-lg-4 col-md-6 col-sm-12 mt-4 basecard{{i.id}}">
                        <div id="card" class="card text-start h-100 cardno{{i.id}}">
            
                          <div class="card-header d-flex justify-content-between pb-0 col-lg-12 card-header-name-txt">
                            <span class="card-header-blue-txt text-black company_name">Qualification : {{i.qualification_name}}</span>
                            <span>

                            </span>
            
                          </div>
            
            
                          <div class="card-body">
            
                              <div class="row">
            
            
            
            
                                <div class="col-lg-12">
                                  <div class="card-header head d-flex justify-content-between p-0">
                                      <span>                                   
                                          <span class="card-header-txt">From</span><br>
                                          <span class="card-header-blue-txt from_date">{{i.formatedfromdate}}</span> 
                                      </span>
                                      <span class="d-flex justify-content-between">
                                          <span>                                   
                                            <span class="card-header-txt">To</span><br>
                                            <span class="card-header-blue-txt to_date">{{i.formatedtodate}}</span> 
                                          </span>
            
            
                                      </span>
                                      
                                      <span class="d-none">                                   
                  
                                      </span>
                                  </div>
            
                                </div>
            
                                <div class="col-lg-12">
                                  <div class="card-header p-0">
                                    <span class="card-header-txt">Institute/Organization Name : Maharashtra State Board</span><br>
                                    <span  class="my-3 card-body-reason-text addReadMore company_address showlesscontent " data-bs-toggle="tooltip" data-bs-placement="bottom"  title="Address">Maharashtra State Board</span>
                                  </div>
                                </div>
            
            
            
                              </div>
            
                          </div>

                          <div class="card-footer cardfooter mt-auto">
                            <div class="row">
            
            
                              <div class="col-lg-12 conclusion-box d-flex justify-content-between my-2">
                
                                <span class="view-image-txt" data-bs-toggle="modal" 
                                data-bs-target="#viewmarksheet{{i.id}}"
                                >View Marksheet</span>
            
            

                              </div>
                            </div>
            
                            
            
                          </div>
            
                          <div class="modal fade" id="viewmarksheet{{i.id}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-lg">
                            
                              <div class="modal-content">           
                                <div class="modal-header">
                                  <h5 class="modal-title py-2" id="exampleModalLabel">Document</h5>
                                </div>
                                <div class="modal-body">
                                  <div class="row py-1">
                                    <div>
                                      <img src="{{ImageURL}}{{i.marksheet}}" class="salary img-thumbnail" style="max-width: 100%; max-height: 100%" />
                
                
                                    </div>
                                  </div>            
                                </div>
                                <div class="modal-footer d-flex">
                                  <button type="button" class="trackproBtn modalClose" style="width: 20% !important;" data-bs-dismiss="modal">Close</button>
                                </div>
                              </div>
                            </div>
                          </div>
                
        
            
                        </div>
            
            
            
                      </div>
                    {%endfor%}


                  </div>
                
                </div>
              </div>
            </div>
        
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingThree">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                  Employment Details
                </button>
              </h2>
              <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                  <div class="col-md-12 d-flex justify-content-between mt-2">
                    <h5 class="">Previous Company Details</h5>
                    <div>
                    </div>
                  </div>


                  <div class="row" id="">
                    {%for i in previouscompanys%}
                      <div class="cardcolumn col-lg-4 col-md-6 col-sm-12 mt-4 basecard{{i.id}}">
                        <div id="card" class="card text-start h-100 cardno{{i.id}}">
            
                          <div class="card-header d-flex justify-content-between pb-0 col-lg-12 card-header-name-txt">
                            <span class="card-header-blue-txt text-black company_name">{{i.companyname}}</span>
                            <span>

                            </span>
            
                          </div>
            
            
                          <div class="card-body">
            
                              <div class="row">
            
            
            
            
                                <div class="col-lg-12">
                                  <div class="card-header head d-flex justify-content-between p-0">
                                      <span>                                   
                                          <span class="card-header-txt">From</span><br>
                                          <span class="card-header-blue-txt from_date">{{i.formatedjoinDate}}</span> 
                                      </span>
                                      <span class="d-flex justify-content-between">
                                          <span>                                   
                                            <span class="card-header-txt">To</span><br>
                                            <span class="card-header-blue-txt to_date">{{i.formatedleaveDate}}</span> 
                                          </span>
            
            
                                      </span>
                                      
                                      <span class="d-none">                                   
                                        <span class="card-header-txt">Designation</span><br>
                                        <span class="card-header-blue-txt designation">{{i.designation}}</span> 
                                      </span>
                                  </div>
            
                                </div>
            
                                <div class="col-lg-12">
                                  <div class="card-header p-0">
                                    <span class="card-header-txt">Company Address :</span><br>
                                    <span  class="my-3 card-body-reason-text addReadMore company_address showlesscontent " data-bs-toggle="tooltip" data-bs-placement="bottom"  title="Address">{{i.companyaddress}}</span>
                                  </div>
                                </div>
                              </div>
            
                          </div>
                          <div class="card-footer cardfooter mt-auto">
                            <div class="row">
            
            
                              <div class="col-lg-12 conclusion-box d-flex justify-content-between my-2">
                
                                <span class="view-image-txt" data-bs-toggle="modal" 
                                data-bs-target="#viewsalaryslip{{i.id}}"
                                >View Salary Slip</span>
            
            
                                <span class="view-image-txt"  data-bs-toggle="modal" 
                                data-bs-target="#viewrelieving{{i.id}}">View Relieving Letter</span>
                              </div>
                            </div>
            
                            
            
                          </div>
            
                          <div class="modal fade" id="viewsalaryslip{{i.id}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-lg">
                            
                              <div class="modal-content">           
                                <div class="modal-header">
                                  <h5 class="modal-title py-2" id="exampleModalLabel">Salary Slip</h5>
                                </div>
                                <div class="modal-body">
                                  <div class="row py-1">
                                    <div>
                                      <img src="{{ImageURL}}{{i.salaryslip}}" class="salary img-thumbnail" style="max-width: 100%; max-height: 100%" />
                
                
                                    </div>
                                  </div>            
                                </div>
                                <div class="modal-footer d-flex">
                                  <button type="button" class="trackproBtn modalClose" style="width: 20% !important;" data-bs-dismiss="modal">Close</button>
                                </div>
                              </div>
                            </div>
                          </div>
                
                          <div class="modal fade" id="viewrelieving{{i.id}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-lg">
                            
                              <div class="modal-content">           
                                <div class="modal-header">
                                  <h5 class="modal-title py-2" id="exampleModalLabel">Relieving Letter</h5>
                                </div>
                                <div class="modal-body">
                                  <div class="row py-1">
                                    <div>
                                      <img src="{{ImageURL}}{{i.relieving}}" class="relieving img-thumbnail" style="max-width: 100%; max-height: 100%" />
                
                
                                    </div>
                                  </div>            
                                </div>
                                <div class="modal-footer d-flex">
                                  <button type="button" class="trackproBtn modalClose" style="width: 20% !important;" data-bs-dismiss="modal">Close</button>
                                </div>
                              </div>
                            </div>
                          </div>
            
                        </div>
            
            
            
                      </div>
                    {%endfor%}


                  </div>
                  <div class="row my-4">
                    <h5 class="mt-3">Reference Details</h5>
                    <h6 class="my-3">Reference Name 1</h6>


                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <input type="text" class="form-control read-only-input" id="refname1" name="refname1"  value="{{secondaryInfo.refname1|default_if_none:''}}">
                        <label for="refname1"  class="form-content">Reference Name 1</label>
                        <!-- <span class="error" id="refname1_err"></span> -->
                      </div>
      
                      <div class="form-floating mb-3">
                        <input type="text" class="form-control read-only-input" id="refnumber1" name="refnumber1"  value="{{secondaryInfo.refnumber1|default_if_none:''}}">
                        <label for="refmob1"  class="form-content">Mobile No</label>
                        <!-- <span class="error" id="refmob1_err"></span> -->
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <input type="text" class="form-control read-only-input" id="refdesg1" name="refdesg1"  value="{{secondaryInfo.refdesg1|default_if_none:''}}">
                        <label for="refdesignation1"  class="form-content">Designation</label>
                        <!-- <span class="error" id="refdesignation1_err"></span> -->
                      </div>
                      <div class="form-floating mb-3">
                        <input type="text" class="form-control read-only-input" id="refemail1" name="refemail1"  value="{{secondaryInfo.refemail1|default_if_none:''}}">
                        <label for="refemail1"  class="form-content">Email Address</label>
                        <!-- <span class="error" id="refemail1_err"></span> -->
                      </div>
                
                    </div>
      
                    <div class="col-md-12">
                      <h6 class="my-3">Reference Name 2</h6>
                    </div>
                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <input type="text" class="form-control read-only-input" id="refname2" name="refname2"  value="{{secondaryInfo.refname2|default_if_none:''}}">
                        <label for="refname2"  class="form-content">Reference Name 2</label>
                      </div>
                      <div class="form-floating mb-3">
                        <input type="text" class="form-control read-only-input" id="refnumber2" name="refnumber2"  value="{{secondaryInfo.refnumber2|default_if_none:''}}">
                        <label for="refmob2"  class="form-content">Mobile No</label>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-floating mb-3">
                        <input type="text" class="form-control read-only-input" id="refdesg2" name="refdesg2"  value="{{secondaryInfo.refdesg2|default_if_none:''}}">
                        <label for="refdesignation2"  class="form-content">Designation</label>
                      </div>
                      <div class="form-floating mb-3">
                        <input type="text" class="form-control read-only-input" id="refemail2" name="refemail2"  value="{{secondaryInfo.refemail2|default_if_none:''}}">
                        <label for="refemail2"  class="form-content">Email Address</label>
                      </div>
                
                    </div>


                  </div>
                </div>
              </div>
            </div>
        
        
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingFour">
                  <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                    Details and Documents
                  </button>
                </h2>
                <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
                  <div class="accordion-body">

                    <div class="row">
                      <h5 class="my-3">Details and Document</h5>
                      <div class="col-md-6">
        
                        <div class="form-floating mb-3">
                          <input type="text" class="form-control read-only-input" id="accountholdername" name="accountholdername"  value="{{secondaryInfo.accountholdername|default_if_none:''}}" oninput="this.value = this.value.replace(/[^a-zA-Z ]+/g,'').replace(/(\..*)\./g, '$1');">
                          <label for="accountholdername"  class="form-content">Account Holder Name</label>
                          <span id="accountholdername_err" class="error"></span>
                        </div>
        
                        <div class="form-floating mb-3">
                          <input type="text" class="form-control read-only-input" id="ifsc" name="ifsccode"  value="{{secondaryInfo.ifsccode|default_if_none:''}}">
                          <label for="ifsc"  class="form-content">IFSC Code</label>
                          <span id="ifsc_err" class="error"></span> 
                        </div>
        
                          <div class="form-floating mb-3">
                            <input type="text" class="form-control read-only-input" id="accountno" name="accountnumber"  value="{{secondaryInfo.accountnumber|default_if_none:''}}" >
                            <label for="accountno"  class="form-content">Account Number</label>
                            <span id="accountno_err" class="error"></span>
                          </div>
        
                      </div>
                    
                        <div class="col-md-6">
                          <div class="form-floating mb-3">
                            <input type="text" class="form-control read-only-input" id="bankname" name="bankname"  value="{{secondaryInfo.bankname|default_if_none:''}}" oninput="this.value = this.value.replace(/[^a-zA-Z ]+/g,'').replace(/(\..*)\./g, '$1');">
                            <label for="bankname"  class="form-content">Bank Name</label>
                            <span id="bankname_err" class="error"></span>
                          </div>
        
                          <div class="form-floating mb-3">
                            <input type="text" class="form-control read-only-input" id="branchname" name="branchname"  value="{{secondaryInfo.branchname|default_if_none:''}}" oninput="this.value = this.value.replace(/[^a-zA-Z ]+/g,'').replace(/(\..*)\./g, '$1');">
                            <label for="branchname"  class="form-content">Branch Name</label>
                            <span id="branchname_err" class="error"></span>
                          </div>
                          <div class="form-floating mb-3">
                            <input type="text" class="form-control read-only-input" id="confirmaccountno" name="confirmaccountnumber"  value="{{secondaryInfo.confirmaccountnumber|default_if_none:''}}">
                            <label for="confirmaccountno"  class="form-content">Confirm Account Number</label>
                            <span id="confirmaccountno_err" class="error"></span>
                          </div>
        
        
                      </div>
                      <h5 class="my-3">Other Details</h5>
        
                        <div class="col-md-6">
                          <div class="form-floating mb-3">
                            <input type="text" class="form-control read-only-input" id="previouspfaccountno" name="previouspfaccountno"  value="{{secondaryInfo.previous_pf_accountno|default_if_none:''}}">
                            <label for="previouspfaccountno"  class="form-content">Previous PF Account </label>
                            <span id="previouspfaccountno_err" class="error"></span>
                          </div>
                        </div>
        
            
        
                        <div class="col-md-6">
                          <div class="form-floating mb-3">
                            <input type="text" class="form-control read-only-input" id="esic" name="esic"  value="{{secondaryInfo.esic_number|default_if_none:''}}">
                            <label for="esic"  class="form-content">ESIC Number</label>
                            <span id="esic_err" class="error"></span>
                          </div>
                        </div>
        
        
                    </div>

                  </div>
                </div>
            </div>

          </div>
        


            


          <div class="d-flex justify-content-center my-3">
            {%if users.data.documentverified == False%}
              <a href="javascript:void(0)" class="wizardbtn btn-next" onclick="acceptDocument({{secondaryInfo.userId}});">Accept</a>
              <a href="javascript:void(0)" class="wizardbtn btn-next mx-5" data-bs-toggle="modal" data-bs-target="#RejectModal">Reject</a>
            {%endif%}
            </div>


      </form>


  </main>
  <div class="modal fade" id="AddDepartment"  aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <form action="" class="formstyle">
        <div class="modal-content">           
          <div class="modal-header ps-4">
            <h5 class="modal-title py-2" id="exampleModalLabel">Adhar Card </h5>
          </div>
          <div class="modal-body">
            
            <img src="{{imageurl}}{{secondaryInfo.adhaarcardimage}}" width="100%" />
          
          </div>
          <div class="modal-footer mt-3">
            <button type="button" class="trackproBtn modalClose" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div class="modal fade" id="AddDepartment1"  aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <form action="" class="formstyle">
        <div class="modal-content">           
          <div class="modal-header ps-4">
            <h5 class="modal-title py-2" id="exampleModalLabel">PAN Card</h5>
          </div>
          <div class="modal-body">
            
            <img src="{{imageurl}}{{secondaryInfo.pancardimage}}" width="100%"/>
          
          </div>
          <div class="modal-footer mt-3">
            <button type="button" class="trackproBtn modalClose" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div class="modal fade" id="RejectModal"  aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="formstyle">
        <div class="modal-content">           
          <div class="modal-header ps-4">
            <h5 class="modal-title py-2" id="exampleModalLabel">Rejected Reason</h5>
          </div>
          <div class="modal-body">
            
            <div class="row">
              <div class="col-12 px-4">
                <div class="form-floating">
                    <textarea id="resone" class="form-control"  name="Resone" oninput="this.value = this.value.replace(/[^a-zA-Z ]+/g,'').replace(/(\..*)\./g, '$1');"></textarea>
                    <label for="resone">Reason<span style="color:red;">*</span></label>
                    <span id="resoneerror" class="error"></span>
                </div>
              </div>

          
            </div>
          
          </div>
          <div class="modal-footer mt-3 justify-content-center">
            <button type="button" class="trackproBtn modalClose" data-bs-dismiss="modal">Close</button>
            <button onclick="return rejectedDocument({{secondaryInfo.userId}});" class="trackproBtn" id="">Submit</button>
          </div>
        </div>
      </div>
    </div>
  </div>




{%endblock%}
{% block script%}
{{block.super}}



<script>

  $(document).ready(function() {

    
    var readURL = function(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('.profile-pic').attr('src', e.target.result);
            }
    
            reader.readAsDataURL(input.files[0]);
        }
    }
    

    // $(".file-upload").on('change', function(){
    //     readURL(this);
    // });
    
    $(".upload-button").on('click', function() {
       $(".file-upload").click();
    });
  });


</script>

<script>

      $(function(){
        var dtToday = new Date();

        var month = dtToday.getMonth() + 1;// jan=0; feb=1 .......
        var day = dtToday.getDate();
        var year = dtToday.getFullYear() - 18;
        if(month < 10)
            month = '0' + month.toString();
        if(day < 10)
            day = '0' + day.toString();
        var minDate = year + '-' + month + '-' + day;
        var maxDate = year + '-' + month + '-' + day;
      $('#personalbirthyear').attr('max', maxDate);
    });
  


    function acceptDocument(id){

        $.ajax({ 
            type: "POST",
            url: frontendURL + "accept-document",
            headers:{
              'Authorization': 'Token '+ '{{token}}'
            },
            
            data: {
                'UserId':id,
                'csrfmiddlewaretoken':'{{csrf_token}}'
            },
            
            success: function(response) {
            if(response.status != 1){
              console.log("hiiii")
                swal({
                  icon: "warning",
                  title: "",
                  text: response.Msg,
                  button: "Close",
                  timer:2000,
                });
              }else{
                swal({
                icon: "success",
                title: "",
                text: response.Msg,
                buttons: false,
                timer:2000,
              });
              
                window.location.href = frontendURL + "task/"
              
              
               
              } 
             
            }
          });


    }

    function rejectedDocument(id){
        var resone = $('#resone').val();
        if (IsValid(resone)) {
            $('#resone').html();
            $('#resoneerror').show().delay(3000).slideUp();
            $('#resoneerror').html('Please enter reason');
            $('#resone').focus();
            return false;
        }else{
            $.ajax({ 
                type: "POST",
                url: frontendURL + "rejected-Document",
                headers:{
                  'Authorization': 'Token '+ '{{token}}'
                },
                data: {
                    'UserId':id,
                    'resone':resone,
                    'csrfmiddlewaretoken':'{{csrf_token}}'
                },
                
                success: function(response) {
                  console.log("res", response)
                if(response.status != 1){
                  console.log("hiiii")
                    swal({
                      icon: "warning",
                      title: "",
                      text: response.Msg,
                      button: "Close",
                      timer:2000,
                    });
                  }else{
                    swal({
                    icon: "success",
                    title: "",
                    text: response.Msg,
                    buttons: false,
                    timer:2000,
                  });
                  window.location.href = frontendURL + "task/"
                   
                  } 
                 
                }
              });
        }
    }
   

</script>
  {%endblock%}